

$.fn.toJson=function(){form=$(this);var formArray=form.serializeArray(),jsonOutput={};return $.each(formArray,(function(i,element){var elemNameSplit=element.name.split("["),elemObjName="jsonOutput";$.each(elemNameSplit,(function(nameKey,value){nameKey!=elemNameSplit.length-1?(elemObjName="]"==value.slice(value.length-1)?"]"===value?elemObjName+"["+Object.keys(eval(elemObjName)).length+"]":elemObjName+"["+value:elemObjName+"."+value,void 0===eval(elemObjName)&&eval(elemObjName+" = {};")):"]"==value.slice(value.length-1)?"]"===value?eval(elemObjName+"["+Object.keys(eval(elemObjName)).length+"] = '"+element.value.replace("'","\\'")+"';"):eval(elemObjName+"["+value+" = '"+element.value.replace("'","\\'")+"';"):eval(elemObjName+"."+value+" = '"+element.value.replace("'","\\'")+"';")}))})),jsonOutput};


$.fn.toForm = function (a, l) { var n = this, s = { data: a || null, callbacks: l }; null != s.data && $.each(s.data, function (a, l) { if (null != s.callbacks && s.callbacks.hasOwnProperty(a)) s.callbacks[a](l); else if (Array.isArray(l)) { var e = $('[name="' + a + '[]"]', n); e.length ? e.val(l) : console.error("Invalid values passed") } else $('[name="' + a + '"]', n).val(l) }) };


!function(n,a,o){"use strict";n.extend(n.fn,{saveForm:function(a,i){return this.each(function(){var t=n.data(this,"plugin_saveForm");if(!t){var e="object"==typeof a?a:{};t=n.data(this,"plugin_saveForm",new n.saveForm(this,e))}"string"==typeof a&&("clearStorage"===a?n.saveForm.clearStorage(t._formName):(n.isArray(i)||(i=[i]),"function"==typeof t[a]&&t[a].apply(t,i)))})}}),n.saveForm=function(t,e){this._form=t,this.settings=n.extend({},n.saveForm.defaults,e),this.init()},n.extend(n.saveForm,{defaults:{exclude:':password, input[type="hidden"], :file, .disable_save',include:null,formName:o,addPathToName:!1,addPathLength:-255,loadInputs:!0,sameNameSeparator:"___",resetOnSubmit:!0},prototype:{_form:null,init:function(){if(this._elementList=[],this._loadingList={},this._formName="",this.setFormName()){var t=this;this._elementList=n.saveForm.getElementList(this._formName),n(this._form).find(":input").each(function(){t.addElement(this)}),this.storeElementList(),!0===this.settings.resetOnSubmit&&n(this._form).submit(function(){n.saveForm.clearStorage(t._formName)})}},setFormName:function(){var t=n(this._form);if(this._formName=this.settings.formName!==o?this.settings.formName:t.attr("id")!==o?t.attr("id"):t.attr("name")!==o?t.attr("name"):o,this._formName==o){var e=n("form").index(t);if(-1===e)return!1;this._formName=a.location.pathname+"_formindex_"+e}return!0===this.settings.addPathToName&&(this._formName=this._formName+"___"+a.location.pathname.slice(this.settings.addPathLength)),!0},addElement:function(a){var t=n(a);if(!t.is(this.settings.exclude)&&(null===this.settings.include||t.is(this.settings.include))){var e=this,i=this.getName(a),s=o;0<n.saveForm.callbacks.length&&n.each(n.saveForm.callbacks,function(t,e){if(e.match(a))return s=e,!1}),i&&(t.change(function(t){e.storeElement(t)}).keyup(function(e,a,i){var s,n,o,r,m;null==a&&(a=100);function l(){var t=Date.now()-r;t<a&&0<=t?s=setTimeout(l,a-t):(s=null,i||(m=e.apply(o,n),o=n=null))}function t(){o=this,n=arguments,r=Date.now();var t=i&&!s;return s=s||setTimeout(l,a),t&&(m=e.apply(o,n),o=n=null),m}return t.clear=function(){s&&(clearTimeout(s),s=null)},t.flush=function(){s&&(m=e.apply(o,n),o=n=null,clearTimeout(s),s=null)},t}(function(t){e.storeElement(t)},500)),this._loadingList[i]===o?this._loadingList[i]=0:t.is(":radio")||(this._loadingList[i]++,n.data(a,"multiple",this._loadingList[i]),i=i+this.settings.sameNameSeparator+this._loadingList[i]),-1===this._elementList.indexOf(i)&&this._elementList.push(i),!0===this.settings.loadInputs&&(s&&s.loadElement?s.loadElement(a,this):this.loadElement(a)))}},loadElement:function(t){var e=n(t),a=this.getName(t),i=localStorage.getItem(a);null!==i&&(i=JSON.parse(i),e.is(":checkbox")?e.prop("checked",i).change():e.is(":radio")?i==e.val()&&e.prop("checked",!0).change():e.val(i).change())},storeElement:function(t){var e,a=this.getName(t.target),i=n(t.target);e=n(t.target).is(":checkbox")?i.prop("checked"):i.val(),localStorage.setItem(a,JSON.stringify(e))},storeElementList:function(){localStorage.setItem("elementList_"+this._formName,JSON.stringify(this._elementList))},clearElementList:function(){localStorage.removeItem("elementList_"+this._formName)},getName:function(t){var e=n(t),a=e.attr("name")!==o?e.attr("name"):e.attr("id")!==o?e.attr("id"):o;return a===o?o:this._formName+"_"+a+(n.data(t,"multiple")!==o?this.settings.sameNameSeparator+n.data(t,"multiple"):"")}},callbacks:[],addCallback:function(t){n.saveForm.callbacks.push(t)},getElementList:function(t){return JSON.parse(localStorage.getItem("elementList_"+t))||[]},clearStorage:function(t){var e=n.saveForm.getElementList(t);if(0<e.length)return n.each(e,function(t,e){localStorage.removeItem(e)}),!0}}),n.fn.saveForm.defaults=n.saveForm.defaults,n.fn.saveForm.getElementListByFormName=n.saveForm.getElementList,n.fn.saveForm.clearStorageByFormName=n.saveForm.clearStorage}(jQuery,window,void document);